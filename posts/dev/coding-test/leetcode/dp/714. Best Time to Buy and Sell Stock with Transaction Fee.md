---
title: "714. Best Time to Buy and Sell Stock with Transaction Fee법"
published: false
description: "Leet714. Best Time to Buy and Sell Stock with Transaction Fee는 방법"
tags: ["알고리즘", "동적프로그래밍", "DP", "LeetCode", "코딩테스트"]
cover_image:
series: "LeetCode 문제 풀이"
---

714. Best Time to Buy and Sell Stock with Transaction Fee

```kotlin
class Solution {
    fun maxProfit(prices: IntArray, fee: Int): Int {
        val n = prices.size
        if (n == 0) return 0

        // dp[i][0]: max profit on day i with 0 stock (not holding)
        // dp[i][1]: max profit on day i with 1 stock (holding)
        val dp = Array(n) { IntArray(2) }

        // Base case
        dp[0][0] = 0
        dp[0][1] = -prices[0]

        // State transition
        for (i in 1 until n) {
            // Either do nothing (keep not holding), or sell stock today
            dp[i][0] = maxOf(dp[i - 1][0], dp[i - 1][1] + prices[i] - fee)

            // Either do nothing (keep holding), or buy stock today
            dp[i][1] = maxOf(dp[i - 1][1], dp[i - 1][0] - prices[i])
        }

        // We want to end up with no stock for max profit
        return dp[n - 1][0]
    }
}


Input: prices = 1,5,6,10 , fee = 3

dp00 = 0
dp01 =-1

dp10 = 1   0 vs-1 + 5 - 3
dp11 =-1  -1 vs 0 - 5

dp20 = 2  -1 vs-1 + 6 - 3
dp21 =-1  -1 vs 1 - 6

dp30 = 6   2 vs-1 + 10 - 3
dp31 =-1  -1 vs 2 - 10




Input: prices = 1,3,2,8,4,9 , fee = 2


dp10 = 0
dp11 =-1

dp20 = 0
dp21 =-1

dp30 = 5
dp31 =-1

dp40 = 5
dp41 = 1

dp50 = 8
dp51 = 1
```
