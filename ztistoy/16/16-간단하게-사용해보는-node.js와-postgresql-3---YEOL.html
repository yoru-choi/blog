
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>간단하게 사용해보는 node.js와 postgresql 3  -YEOL</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">간단하게 사용해보는 node.js와 postgresql 3  -YEOL</h2>
                                <div class="box-info">
                                    <p class="category">DB/rdb</p>
                                    <p class="date">2020-06-05 15:31:03</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><figure class="imageblock alignCenter" data-filename="postgresql.png" data-origin-width="573" data-origin-height="566" width="446" height="NaN" data-ke-mobilestyle="widthContent">
    <span data-lightbox="lightbox">
        <img src="./img/img.png" data-filename="postgresql.png" data-origin-width="573" data-origin-height="566" width="446" height="NaN" data-ke-mobilestyle="widthContent" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>2번째 게시글의 require 구문을 조금 수정하였습니다.</p>
<p><figure class="imageblock alignCenter" data-filename="1.PNG" data-origin-width="491" data-origin-height="198" data-ke-mobilestyle="widthContent">
    <span data-lightbox="lightbox">
        <img src="./img/img_1.png" data-filename="1.PNG" data-origin-width="491" data-origin-height="198" data-ke-mobilestyle="widthContent" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p>최소한의 require로만 보여드리려 합니다.</p>
<p>설명에 없던 것 중 하나는 cors입니다. 이유는 서버에서 값을 넘겨줄 때 cors&nbsp; 에러가 뜨기 때문입니다.</p>
<p>외부에서 오는 데이터를 보안 목적으로 차단한다고 합니다. 그래서 라이브러리를 다운로드하여 해결합니다.</p>
<p><a href="https://www.npmjs.com/package/cors" target="_blank" rel="noopener">npm cors</a></p>
<p>그럼 추가할걸 다추가했습니다.</p>
<p>const&nbsp;config&nbsp;=&nbsp;{ <br />&nbsp;&nbsp;user: '유저', <br />&nbsp;&nbsp;password:' 비번 ', <br />&nbsp;&nbsp;host:&nbsp;'localhost', <br />&nbsp;&nbsp;port:&nbsp;5432, <br />&nbsp;&nbsp;database:&nbsp;'디비명', <br />}; <br />let&nbsp;pool&nbsp;=&nbsp;new&nbsp;Pool(config);</p>
<p>configure 환경 설정한다는 뜻입니다. db에 관련된 설정을 적어줍니다.</p>
<p>&nbsp;</p>
<p><figure class="imageblock alignCenter" data-filename="2.PNG" data-origin-width="547" data-origin-height="168" data-ke-mobilestyle="widthContent">
    <span data-lightbox="lightbox">
        <img src="./img/img_2.png" data-filename="2.PNG" data-origin-width="547" data-origin-height="168" data-ke-mobilestyle="widthContent" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>바디 파서는 post 값을 받아주려고 씁니다.&nbsp;</p>
<p>node.js에서만 구동하셨다면 bodyparser와 cors는 필요 없을 수 있습니다.</p>
<p>하지만 post 활용 및 db, server, client를 연동해줄 때 사용할 수 있으니 알아보시는 걸 추천합니다.</p>
<p>&nbsp;</p>
<p><figure class="imageblock alignCenter" data-filename="1.PNG" data-origin-width="758" data-origin-height="333" data-ke-mobilestyle="widthContent">
    <span data-lightbox="lightbox">
        <img src="./img/img_3.png" data-filename="1.PNG" data-origin-width="758" data-origin-height="333" data-ke-mobilestyle="widthContent" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p>&nbsp;</p>
<p>제가 만든 테이블 명은 usertable입니다. 유저네임만 불러줬습니다.</p>
<p>그리고 local포트의 3000번 포트 &nbsp;<a href="http://localhost:3000/">http://localhost:3000/</a> 이곳에서 user를 추가해주신다면 불러주신 값이</p>
<p>node.js에서 출력될 것입니다.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>순서대로 보자면 express 서버의 app을 get 방식으로 불러주는데 첫 번째 파라미의 경로로 불러줍니다.</p>
<p>밑에 db에 여태 넣었던 값을 토대로 연결을 해주는 connect를 해주고 첫 번째 파라미터</p>
<p>then값이 잘 통과 됐다면 query 문을 대입합니다.&nbsp; 쿼리 문도 잘 입력이 되면 연결을 종료하고</p>
<p>받아준 result 값을 send 해주면 내가 선택한 경로에 result.rows 열들의 값이 json타입으로 입력됩니다.</p>
<p>&nbsp;</p>
<p>만약 다른 포트에 클라이언트 개념으로 페이지를 하나 더 만드셨다면 cors가 보안 문제를 해결해 줄것입니다.</p>
<p>감사합니다.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
                        </div>
                        <br/>
                        <div class="tags">
                            #PostgreSQL #node.js #postgresql node.js 연동 
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
