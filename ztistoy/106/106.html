
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>Nginx 설치 및 설정과 실행 -YEOL ( how to install and use nginx on centos 7 )</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">Nginx 설치 및 설정과 실행 -YEOL ( how to install and use nginx on centos 7 )</h2>
                                <div class="box-info">
                                    <p class="category">ETC/ETCLanguage</p>
                                    <p class="date">2021-10-18 18:03:29</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <h3 data-ke-size="size23">&nbsp;</h3>
<p data-ke-size="size16">- 환경</p>
<p data-ke-size="size16">OS : Redhat (Centos)&nbsp;<b><span style="color: #333333;"></span></b></p>
<p data-ke-size="size16">&nbsp;</p>
<h3 data-ke-size="size23"><b><span style="color: #333333;">- nginx 설치하기</span></b></h3>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="color: #333333;">yum에는 nginx 저장소가 따로 없다고 합니다. 설치하기 위한 정보를 저장소에 추가해야 합니다.</span></p>
<pre id="code_1632459131282" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>[root@test /]# vi /etc/yum.repos.d/nginx.repo</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="color: #333333;">vi 명령어로 nginx.repo 파일을 만들어 주세요.</span><span style="color: #333333;"></span></p>
<p data-ke-size="size16"><span style="color: #333333;">파일 내부를 아래와 같이 채워주세요.</span></p>
<pre id="code_1632459149980" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>[nginx]
name=nginx repo
baseurl=http://nginx.org/packages/centos/7/$basearch/
gpgcheck=0
enabled=1</code></pre>
<p data-ke-size="size16"><span style="color: #333333;">[xxxx]와 name은 유저가 정하는 이름입니다. </span></p>
<p data-ke-size="size16"><span style="color: #333333;">baseurl이 데이터를 호출하기 위한 외부 저장소의 url입니다.</span></p>
<p data-ke-size="size16">gpg는 프로그램 변조 유무를 검사하는 프로그램입니다.</p>
<p data-ke-size="size16">배포할 때 누군가 악의적인 목적으로 내부 원본과 다른 소스를 배포할 수 있습니다. gpg는 배포자의 서명 or 서명된 파일을 제공합니다. 그런 gpg의 서명 여부를 체크하는 옵션입니다. <span style="color: #333333;">활성화 1, 비활성화 0입니다.</span></p>
<p data-ke-size="size16"><span style="color: #333333;">enabled은 Yum repo에 추가할지 말지에 대한 설정입니다. 활성화 1, 비활성화 0입니다.</span></p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="color: #333333;">저장소 설정을 끝냈으니 아래의 명령어로 nginx를 설치해줍니다. -y는 설치 중 모든 질문을 yes로 한다는 설정입니다.&nbsp;&nbsp;</span></p>
<pre id="code_1632459238604" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>[root@test /]# yum install -y nginx</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="color: #333333;">아래의 명령어로 설치가 잘 완료되었는지 확인합니다.</span></p>
<pre id="code_1636424195657" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>[root@test /]# nginx -v</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="color: #333333;">설치가 완료됐다면 아래의 명령어를 한번 실행해주세요&nbsp;</span></p>
<p data-ke-size="size16">&nbsp;</p>
<h3 data-ke-size="size23"><b><span style="color: #333333;">- nginx 설정하기&nbsp;</span></b></h3>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="color: #333333;">아래의 경로에서 nginx에서 사용할 conf 파일을 만들어줍니다.</span></p>
<pre id="code_1632726748176" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>[root@test /]#  vi /etc/nginx/conf.d/default.conf</code></pre>
<p data-ke-size="size16"><span style="color: #333333;">아래와 같이 설정해줍니다.</span></p>
<pre id="code_1632726845968" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>server {
    listen       53001;
    #listen       [::]:8080;

    #server_name  localhost; # 도메인 주소 넣는부분

    root /usr/dist/; # 배포할 프로젝트 dist 경로
    index index.html index.htm;

    client_max_body_size 100M;

    location / {
        root /usr/dist;
        index index.html;
        try_files $uri $uri/ /index.html; #경로 탐색
    }
    
    location /graphql { # 그래프큐엘 넣는 부분 다른 API를 넣어도 됨 
        proxy_pass http://주소:54001/graphql;
    }

    error_page 404 /404.html;
        location = /40x.html {
    }

    error_page 500 502 503 504 /50x.html;
        location = /50x.html {
    }
}</code></pre>
<p data-ke-size="size16">본인이 원하는 root 경로를 지정하세요. 해당 root 위치에 dist forder ( 본인의 front build folder )를 준비하세요.</p>
<p data-ke-size="size16"><span style="color: #333333;">그리고 아래의 명령어로 nginx.conf를 봅니다. 이게 메인 configuration이며 여기서 default.conf를 호출하는 개념입니다.</span></p>
<pre id="code_1636432213545" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>[root@test /]#  vi /etc/nginx/nginx.conf</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">스크롤을 진행하면서 아래와 같은 include 부분이 나오는 부분부터 진행해주세요.</p>
<pre id="code_1636432517383" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>include /etc/nginx/conf.d/*.conf; # 이부분이 conf 붙은 모든파일을 불러오는부분

아래에 있는 서버로 되있는부분은 #으로 주석처리 해줍시다. 
(쓰지않을 80포트가 문제가 될수있어요.)
   # server {
   #     listen       80;
   #     listen       [::]:80;
   #     server_name  _;
   #     root         /usr/share/nginx/html;
   
   ...
   ...
   ...
   
   # }</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="color: #333333;">아래의 명령어를 입력해 주시면 nginx가 실행이 된 겁니다. 기본적으로 실행 중일 수도 있지만 명령어로 한 번 더 확인해주세요.</span></p>
<pre id="code_1636432631664" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>[root@test /]#   systemctl start nginx</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">만약 방화벽을 설정하지 않았다면 접속할 포트를 지정해줍니다.</p>
<pre id="code_1636530255129" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>[root@test /]#  sudo firewall-cmd --list-ports
[root@test /]#  sudo firewall-cmd --permanent --zone=public --add-port=53001/tcp
[root@test /]#  sudo firewall-cmd --reload</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><span style="color: #333333;">외부에서 nginx에 접속하실 때 접속 가능한 http://your access ip:port 해서 접속해주시면 됩니다.</span></p>
<p data-ke-size="size16"><span style="color: #333333;">고생하셨습니다. 성실한 코딩 하세요.</span></p>
                        </div>
                        <br/>
                        <div class="tags">
                            #centos nginx #redhat nginx #centos nginx 설치 #centos nginx 실행 
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
