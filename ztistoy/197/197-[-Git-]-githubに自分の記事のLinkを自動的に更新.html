
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>[ Git ] githubに自分の記事のLinkを自動的に更新</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">[ Git ] githubに自分の記事のLinkを自動的に更新</h2>
                                <div class="box-info">
                                    <p class="category">ETC/Git</p>
                                    <p class="date">2023-11-23 11:23:11</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <p><figure class="imageblock alignCenter" width="777" height="412" >
    <span data-lightbox="lightbox">
        <img src="./img/img.png" width="777" height="412"  />
    </span>
    <figcaption></figcaption>
</figure></p>
<h2 style="color: #000000;" data-ke-size="size26"><b>Environment</b></h2>
<p data-ke-size="size16">node v20</p>
<p data-ke-size="size16">vscode</p>
<p data-ke-size="size16">javascript</p>
<p data-ke-size="size16">githubAction</p>
<p data-ke-size="size16">自分のblogやツイッターのrssリンク</p>
<p data-ke-size="size16">&nbsp;</p>
<h2 style="color: #000000;" data-ke-size="size26"><b>GithubActionとは</b></h2>
<p data-ke-size="size16">GitHub&nbsp;Actions&nbsp;は、ビルド、テスト、デプロイのパイプラインを自動化できる継続的インテグレーションと</p>
<p data-ke-size="size16">継続的デリバリー&nbsp;(CI/CD)&nbsp;のプラットフォームです。&nbsp;リポジトリに対するすべての&nbsp;pull&nbsp;request&nbsp;を</p>
<p data-ke-size="size16">ビルドしてテストしたり、マージされた&nbsp;pull&nbsp;request&nbsp;を運用環境にデプロイしたりするワークフローを作成できます。<b></b></p>
<p data-ke-size="size16">&nbsp;</p>
<h2 style="color: #000000;" data-ke-size="size26"><b>GithubActionを作る</b></h2>
<p data-ke-size="size16">まず自分のgithubのnickNameとおなじ名前のrepositoryをつくります。</p>
<p data-ke-size="size16">作った後にはそのrepositoryでsettingのactionのgeneral<span style="background-color: #fdfdfd; color: #000000; text-align: start;">をクリックします</span>&nbsp;。</p>
<p data-ke-size="size16">githubActionがpushを同作するためにはpermissionが必要です。一番上のもので選択します。</p>
<p><figure class="imageblock alignCenter" >
    <span data-lightbox="lightbox">
        <img src="./img/img_1.png"  />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16"><a style="color: #0070d1;" href="https://docs.github.com/ko/actions/deployment/about-deployments/deploying-with-github-actions">Document</a>を見ながら参考するほうが見やすいです。</p>
<p data-ke-size="size16">一応自分が作ったrepositoryのcloneをdownloadします。</p>
<p data-ke-size="size16">そしてrootDirectoryからfolderとfileを作りましょう 。"github/workflows/github-action.yml"</p>
<p data-ke-size="size16">本人のfileに以下のコードをコピーペーストします。 <br /><br />これが今後のschedulerとして本人のBlogLinkなどをもたらす仕組みです。</p>
<pre id="code_1700706166654" class="typescript" style="background-color: #f8f8f8; color: #383a42;" data-ke-type="codeblock" data-ke-language="typescript"><code># workflowの名前
name: GitHub Actions For My Profile
# どんな時に実行するのか
on:
  push:
    branches:
      - master
  # 一日1回cronする
  schedule:
    - cron: "0 0 * * *"

#workflow が実行する単位
jobs:
  #job name
  build:
    runs-on: ubuntu-latest
    steps:
      - run: echo "? This job is now running on a ${{ runner.os }} server hosted by GitHub!"
      - run: echo "? The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
      - name: Setup Node
        uses: actions/checkout@v4
      - uses: actions/setup-node@v3
        with:
          node-version: 20
          cache: npm
      - name: Install dependencies
        run: npm ci
      - name: Update README
        run: npm start
      - name: Commit files
        run: |
          git config --local user.email "github-actions[bot]@users.noreply.github.com"
          git config --local user.name "github-actions[bot]"
          git add .
          git commit -a -m "Fix: update README.md"
      - name: Push changes
        uses: ad-m/github-push-action@master
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          branch: ${{ github.ref }}</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<h2 style="color: #000000;" data-ke-size="size26"><b>Schedulerで実行されるreadmeUpdate.jsを作る</b></h2>
<p data-ke-size="size16">vscondeのconsoleでnpm&nbsp;initをしてください。</p>
<p data-ke-size="size16">&nbsp;</p>
<pre id="code_1700708320236" class="typescript" data-ke-language="typescript" data-ke-type="codeblock"><code>npm init -y
npm i rss-parser</code></pre>
<p data-ke-size="size16">そしてつくられったpakage.jsonのscriptsの中にいるtestをstartに変更します。</p>
<pre id="code_1700708859906" class="typescript" data-ke-language="typescript" data-ke-type="codeblock"><code>  "scripts": {
    "start": "node readmeUpdate.js"
  },</code></pre>
<p data-ke-size="size16">readmeUpdate.jsというfileを作ります。このfileがreadmeを作ります。</p>
<p data-ke-size="size16">schedulerがこれを実行します。</p>
<p><figure class="imageblock alignCenter" width="251" height="163" >
    <span data-lightbox="lightbox">
        <img src="./img/img_2.png" width="251" height="163"  />
    </span>
    <figcaption></figcaption>
</figure></p>
<pre id="code_1700706166657" class="typescript" style="background-color: #f8f8f8; color: #383a42;" data-ke-type="codeblock" data-ke-language="typescript"><code>import { writeFileSync } from "node:fs";
import Parser from "rss-parser";

//自分のblogLink
const blogLink = ` https://yeolceo.tistory.com/rss`;

/**
 * README.MDとなるtext
 * @type {string}
 */
let text = `# ? Hi there 
My name is TenChoi
I work as a server programmer
&lt;br /&gt;

&lt;a href="https://github.com/ten-log"&gt;
  &lt;img align="center" src="https://github-readme-stats-theta-gules-17.vercel.app/api?username=ten-log&amp;show_icons=true&amp;theme=dark&amp;line_height=20"/&gt;
&lt;/a&gt;
&lt;br /&gt;
&lt;br /&gt;
&lt;div&gt;
&lt;img src="https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&amp;logo=typescript&amp;logoColor=white" alt="TS and typescript"/&gt;
&lt;img src="https://img.shields.io/badge/Express.js-404D59?style=for-the-badge" alt="white jester shoe icon"/&gt; &lt;br/&gt;
&lt;img src="https://img.shields.io/badge/Java-ED8B00?style=for-the-badge&amp;logo=openjdk&amp;logoColor=white" alt="java"/&gt;
&lt;img src="https://img.shields.io/badge/Spring-6DB33F?style=for-the-badge&amp;logo=spring&amp;logoColor=white" alt="spring"/&gt;
&lt;/div&gt;

### ? Latest Blog Posts
`;

(async () =&gt; {
  // rss-parserをつくります。それでfeedを持ってきます。
  const parser = new Parser({
    headers: {
      Accept: "application/rss+xml, application/xml, text/xml; q=0.1",
    },
  });
  const feed = await parser.parseURL(blogLink);

  // 債権のtitle, linkを持ってきます。そしてtextに追加
  for (let i = 0; i &lt; 7; i++) {
    const { title, link } = feed.items[i];
    console.log(`${i + 1}`);
    console.log(`${title}`);
    console.log(`${link}`);
    text += `&lt;/br&gt;${i + 1}. &lt;a href=${link}&gt;${title}&lt;/a&gt;`;
  }

  // create or update README.md
  writeFileSync("README.md", text, "utf8", (e) =&gt; {
    console.log(e);
  });

  console.log("updated");
})();

/* 
지금가지 개발한 스택 보여주는용
&lt;a href="https://github.com/ten-log"&gt;
  &lt;img align="center" src="https://github-readme-stats-theta-gules-17.vercel.app/api/top-langs?username=ten-log&amp;layout=compact&amp;theme=dark" /&gt;
&lt;/a&gt;
&lt;br /&gt; */</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">このように情報さえあれば、githubのreadmeで整理して管理することができます。</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">参考</p>
<p data-ke-size="size16"><a href="https://docs.github.com/ko/actions/quickstart" target="_blank" rel="noopener&nbsp;noreferrer">https://docs.github.com/ko/actions/quickstart</a></p>
<p data-ke-size="size16"><a href="https://yueliang-front-end.tistory.com/9" target="_blank" rel="noopener&nbsp;noreferrer">https://yueliang-front-end.tistory.com/9</a></p>
                        </div>
                        <br/>
                        <div class="tags">
                            #jp #readme #GitHub #github action 
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
