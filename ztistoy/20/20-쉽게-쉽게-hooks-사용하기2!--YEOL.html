
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>쉽게 쉽게 hooks 사용하기2! -YEOL</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">쉽게 쉽게 hooks 사용하기2! -YEOL</h2>
                                <div class="box-info">
                                    <p class="category">TS, JS/react</p>
                                    <p class="date">2020-06-11 12:39:27</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <p>&nbsp;</p>
<p>&nbsp;</p>
<p><figure class="imageblock alignCenter" data-filename="react.png" data-origin-width="632" data-origin-height="602" width="333" height="NaN" data-ke-mobilestyle="widthContent">
    <span data-lightbox="lightbox">
        <img src="./img/img.png" data-filename="react.png" data-origin-width="632" data-origin-height="602" width="333" height="NaN" data-ke-mobilestyle="widthContent" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>hooks를 쉽게 사용해봅시다. 일단 실행부터 해보고 구조를 뜯어보는 방식이 이해하기 쉽다고 생각합니다.</p>
<p>이전에 했던 reducer의 복습을 한번 할 겁니다.</p>
<p>&nbsp;</p>
<p><b>useReducer 기출 변형</b></p>
<pre id="code_1591836881901" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>import React, {useReducer }from 'react';

function reducer(state, action){

  console.log(`action의 name   -&gt;${action.name}`);
  console.log(`action의 value  -&gt;${action.value}`);
    return{
      ...state,
      [action.name]:action.value
    };
}
const App =()=&gt;{

  const [state, dispatch]= useReducer(reducer, {user:'' , nickname:''});
  const {user , nickname} = state;

  const onChange =e=&gt;{
    console.log(e.target);
    dispatch(e.target);
  }
  return (
    &lt;div&gt;
        &lt;input name="user" value={user} onChange={onChange} /&gt; &lt;br /&gt;
        &lt;input name="nickname" value={nickname} onChange={onChange} /&gt; &lt;br /&gt;
          &lt;b&gt;이름:&lt;/b&gt;{user}&lt;br /&gt;
          &lt;b&gt;닉네임:&lt;/b&gt;{nickname}
    &lt;/div&gt;
  );
}

export default App;
</code></pre>
<p><figure class="imageblock alignCenter" data-origin-width="0" data-origin-height="0" data-ke-mobilestyle="widthContent">
    <span data-lightbox="lightbox">
        <img src="./img/img_1.png" data-origin-width="0" data-origin-height="0" data-ke-mobilestyle="widthContent" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p>이전의 useReducer와 dispatch방식은 그대롭니다.&nbsp; 일단 onChange를 집중해봅시다.</p>
<p>e.target으로 값을 가져옵니다. 그러면 콘솔에 보이시는 것처럼 &lt;input 구문이 통째로 출력됩니다.&nbsp;</p>
<p>input 자체를 파라미터로 dispatch 해주는 것입니다. 그러면 이게 어떻게 되느냐</p>
<p>input에서 보이는 건 name과 value입니다. action의 type자리에 name과 value를 넣어줬다고 생각하면 됩니다.</p>
<p>그리고 switch 할 때처럼 return을 해줍니다.... state는 초깃값의 불변성을 위해 미리 선해줍니다. 그 후&nbsp;</p>
<p>action name과&nbsp; action value를 하게 된다면 이전 시간에 설명드렸던 reducer의 동작 방식과 똑같이 동작합니다.</p>
<p>어차피 switch case는 return을 하기 위한 타입 설정입니다.</p>
<p>결론적으론 input의 name을 초기 변수와 이름을 같게 하였고 값은 대입해주면 됩니다.&nbsp;</p>
<pre id="code_1591837350469" class="html xml" style="overflow: auto; padding: 15px; margin: 20px auto 0px; max-width: 100%; border: 1px solid #dddddd; font: 400 14px / 25.2px Menlo, Consolas, Monaco, monospace; background: #f6f7f8; border-radius: 3px; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial; display: block; color: #383a42; cursor: default; z-index: 1;" data-ke-language="html" data-ke-type="codeblock"><code>	switch(action.type){
    	case 'INCREASE':
        return{ value: state.value +1 };
 </code></pre>
<p>실행을 해보시면서 console과 대조해가면 훨씬 간편하게 이해할 수 있습니다.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><b>useMemo란 본인이 생각한 값이 변경되었을 때만 리 렌더링 하는 hook입니다.</b></p>
<pre id="code_1591843209049" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>import React, {useState , useMemo }from 'react';

const getAverage = numbers =&gt;{
		console.log('평균값 계산 함수 실행중');
		if(numbers.length ===0)return 0;
		const sum = numbers.reduce((a,b)=&gt;a+b);
		return sum/numbers.length;
}

const App =()=&gt;{

	const [list, setList] =useState([]);
	const [number, setNumber]= useState('');

	const onChange =e=&gt;{
		setNumber(e.target.value);  };
	const onInsert=e=&gt;{
		const nextList = list.concat(parseInt(number));
		setList(nextList);
		setNumber('');
	}
	const avg = useMemo(()=&gt;getAverage(list),[list]); //주목하실부분

  return (
    &lt;div&gt;
			&lt;input value = {number} onChange = {onChange} /&gt;
			&lt;button onClick={onInsert}&gt;등록&lt;/button&gt;
				&lt;ul&gt;
					{list.map((value, index)=&gt;(
						&lt;li key={index}&gt;{value}&lt;/li&gt;
					))}
				&lt;/ul&gt;
				&lt;div&gt;
					평균값 : {avg}
				&lt;/div&gt;
		&lt;/div&gt;
  );
}
export default App;
</code></pre>
<p style="text-align: left;" data-ke-size="size14">&nbsp;useMemo라인을 지우셔도 무방합니다. console이 어떻게 출력되는지 확인해주세요.</p>
<p style="text-align: left;" data-ke-size="size14">개념은 간단합니다. list라는 배열 하나를 만들어서 input 이끝나고 list배열에 인자로서 추가할 때 list에 값이 변경되니까</p>
<p style="text-align: left;" data-ke-size="size14">그때 출력 값 avg를 변경해주겠다는 의미입니다.&nbsp;</p>
<p style="text-align: left;" data-ke-size="size14">위쪽에 map.reduce 는 첫 번째 인자는 0에서 시작하고 두 번째 인자는 list의 값으로 시작합니다.</p>
<p style="text-align: left;" data-ke-size="size14">reduce의미 그대로 줄인다는 뜻은 코드의 양을 줄이겠다는 의미로 a+b 는 a를 누적 값으로 놓고 b는 list의 값을 넣어 list의 모든 값을</p>
<p style="text-align: left;" data-ke-size="size14">더할 때까지 더해주겠다는 의미입니다.</p>
<p style="text-align: left;" data-ke-size="size14">코드를 <span style="color: #333333;">console.log('debug 1') <span style="color: #333333;">console.log('debug 2') </span></span>이런 식으로 분류하여 구조를 이해하시는 것도 하나의 방법입니다.</p>
<p style="text-align: left;" data-ke-size="size14">&nbsp;</p>
<p style="text-align: left;" data-ke-size="size14">&nbsp;</p>
<p style="text-align: left;" data-ke-size="size14"><b>마지막으로 useRef입니다. 클래스형 컴포넌트의 ref와 동일한 기능입니다.</b></p>
<pre id="code_1591844346873" class="html xml" style="display: block; overflow: auto; padding: 15px; color: #383a42; background: #f6f7f8; font-size: 14px; border-radius: 3px; font-family: Menlo, Consolas, Monaco, monospace; border: 1px solid #dddddd; margin: 20px auto 0px; cursor: default; z-index: 1; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;" data-ke-language="html" data-ke-type="codeblock"><code>	useRef
    
    	const element = useRef(null);
		element.current.focus();
		ref={element}</code></pre>
<p style="text-align: left;" data-ke-size="size14">사용법이 너무너무 쉬워서 아주 간단하게 표시했습니다.&nbsp;</p>
<p style="text-align: left;" data-ke-size="size14">위의 코드에서 useRef를 import 해줍니다. 그리고 input 내부에 ref를 설정합니다.&nbsp; ref 내부에는 코드 블록과 같이</p>
<p style="text-align: left;" data-ke-size="size14">본인이 useRef를 설정해준 변수를 기입해주시면 됩니다.&nbsp;</p>
<p style="text-align: left;" data-ke-size="size14">등록이 진행되는 insert코드의 최하단에 기입합니다. 등록이 끝나는 동시에 element.current.focus();를실행하고</p>
<p style="text-align: left;" data-ke-size="size14">해당 엘리먼트인 input에 커서가 띄워지는 것을 볼 수 있습니다.&nbsp;</p>
<p style="text-align: left;" data-ke-size="size14">&nbsp;</p>
<p style="text-align: left;" data-ke-size="size14">제기준에서 쓸만한 hooks들을 나열해봤습니다. 도움이 되었길 바랍니다.&nbsp;</p>
                        </div>
                        <br/>
                        <div class="tags">
                            #React Hooks #react useReducer #react useRef #react useMemo 
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
