
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>Electron 빌드 하고 인스톨러로 만드는법</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">Electron 빌드 하고 인스톨러로 만드는법</h2>
                                <div class="box-info">
                                    <p class="category">ETC/Electron</p>
                                    <p class="date">2021-08-02 16:35:45</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <p data-ke-size="size16">&nbsp;</p>
<p><figure class="imageblock alignCenter" data-origin-width="1200" data-origin-height="1200" data-filename="electron.png" width="397" height="397" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img.png" data-origin-width="1200" data-origin-height="1200" data-filename="electron.png" width="397" height="397" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">&nbsp;</p>
<h2 data-ke-size="size26">Builder 만들기</h2>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">node 14.17.1 버전을 사용합니다.&nbsp;</p>
<p data-ke-size="size16">먼저 본인이 빌드할 일렉트론 파일을 준비합니다.</p>
<p data-ke-size="size16">아래의 라이브러리를 글로벌(-g)로 다운로드합니다. 일렉트론 빌더 라이브러리입니다.</p>
<pre id="code_1627877022645" class="html xml" style="overflow: auto; margin: 0px; padding: 0px; word-break: break-all; white-space: pre-wrap; overflow-wrap: break-word; color: #555555; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;" data-ke-language="html" data-ke-type="codeblock"><code>npm install -g electron-builder</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">json 파일을 살펴봅시다.</p>
<p data-ke-size="size16">scripts에서 build 할 때 어떤 플랫폼으로 빌드할지 정해줍니다.</p>
<p data-ke-size="size16">패키징 파일이 보여질 이미지 경로도 정해줍니다. 스크립트와 빌드 이외에는 json을 건드릴 필요가 없습니다.</p>
<pre id="code_1627877102069" class="html xml" style="overflow: auto; margin: 0px; padding: 0px; word-break: break-all; white-space: pre-wrap; overflow-wrap: break-word; color: #555555; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;" data-ke-language="html" data-ke-type="codeblock"><code>{
  "name": "프로젝트이름",
  
  "version": "1.0.0",
  
  "description": "본인 일렉트론 앱 설명",
  
  "main": "main.js",
  
  "scripts": {
    "build:osx": "electron-builder --mac",
    "build:linux": "npm run build:linux32 &amp;&amp; npm run build:linux64",
    "build:linux32": "electron-builder --linux --ia32",
    "build:linux64": "electron-builder --linux --x64",
    "build:win": "npm run build:win32 &amp;&amp; npm run build:win64",
    "build:win32": "electron-builder --win portable --ia32",
    "build:win64": "electron-builder --win portable --x64"
  },

  "build": {
    "win": {
      "icon": "패키징 파일 이미지 경로"
    }
  }
}</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">이제 npm run build:win64 명령어를 윈도 64에서 사용할 일렉트론 파일 빌드가 완료됩니다.&nbsp;</p>
<p data-ke-size="size16">&nbsp;</p>
<h2 data-ke-size="size26">Installer 만들기</h2>
<p data-ke-size="size16">빌드 파일을 installer 형태로 바꿔봅시다.</p>
<p data-ke-size="size16"><a href="https://wixtoolset.org/releases/" target="_blank" rel="noopener">https://wixtoolset.org/releases/</a></p>
<figure id="og_1627886142368" contenteditable="false" data-ke-type="opengraph" data-ke-align="alignCenter" data-og-type="website" data-og-title="WiX toolset" data-og-description="Downloads" data-og-host="wixtoolset.org" data-og-source-url="https://wixtoolset.org/releases/" data-og-url="https://wixtoolset.org//releases/" data-og-image="https://scrap.kakaocdn.net/dn/bwJYW1/hyK6tag6GP/Zk2F38JVTdqvrZTKH86gsK/img.png?width=57&amp;height=36&amp;face=0_0_57_36"><a href="https://wixtoolset.org/releases/" target="_blank" rel="noopener" data-source-url="https://wixtoolset.org/releases/">
<div class="og-image" style="background-image: url('https://scrap.kakaocdn.net/dn/bwJYW1/hyK6tag6GP/Zk2F38JVTdqvrZTKH86gsK/img.png?width=57&amp;height=36&amp;face=0_0_57_36');">&nbsp;</div>
<div class="og-text">
<p class="og-title" data-ke-size="size16">WiX toolset</p>
<p class="og-desc" data-ke-size="size16">Downloads</p>
<p class="og-host" data-ke-size="size16">wixtoolset.org</p>
</div>
</a></figure>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">이 경로에서 다운로드 링크를 누르고 아래 그림을 찾아줍니다. exe 파일을 다운로드한 후 실행해줍니다.</p>
<p><figure class="imageblock alignCenter" data-origin-width="468" data-origin-height="234" data-ke-mobilestyle="widthOrigin">
    <span data-lightbox="lightbox">
        <img src="./img/img_1.png" data-origin-width="468" data-origin-height="234" data-ke-mobilestyle="widthOrigin" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">실행되면 인스톨해주세요. 경로에서&nbsp;<span style="color: #555555;">Program Files(x86)<span> 밑에 WIX 관련 폴더가 생깁니다.</span></span></p>
<p data-ke-size="size16"><span style="color: #555555;"><span>그 디렉터리의 bin 경로에 환경변수 설정해줍니다.</span></span></p>
<p><span style="color: #555555;">CMD에서 candle 입력했을 때 뭐라도 나오면 환경변수가 잘 설정된 겁니다</span></p>
<p data-ke-size="size16">&nbsp;</p>
<p><span style="color: #555555;">npm에서 WIX 인스톨러 라이브러리를 다운로드합니다.</span></p>
<p data-ke-size="size16"><b>&nbsp;npm install electron-wix-msi --save-dev&nbsp;</b></p>
<p data-ke-size="size16">(파이썬 설치 및 환경변수 필요한 라이브러리입니다.)</p>
<p data-ke-size="size16">electron-wix-msi는 문법이 ES6를 주로 사용했기 때문에 babel을 설치하여 실행오류를 막아줍니다.&nbsp;</p>
<p data-ke-size="size16"><b>npm&nbsp;install&nbsp;babel-cli&nbsp;--dev&nbsp;babel-preset-env&nbsp;--dev&nbsp;babel-preset-stage-3&nbsp;--dev</b></p>
<p data-ke-size="size16">babel을 적용하기 위해 기본 경로에. babelrc라는 파일을 만들어줍니다. 아래와 같은 내용을 추가해줍니다.</p>
<pre id="code_1627888333895" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>{
    "presets": ["env", "stage-3"]
}</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">인스톨러를 만들 파일을 만들어줍니다. builder.js 파일을 만들어줍니다.</p>
<pre id="code_1627889388090" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>import { MSICreator } from 'electron-wix-msi';

//msi 파일 크리에이터 
const msiCreator = new MSICreator({
  appDirectory: '빌드하여 생성된(unpacked한) 일렉트론 디렉토리',
  description: '설명',
  exe: '빌드하여 생성된 일렉트론 디렉토리에서의 exe파일 이름',
  name: '이름',
  manufacturer: '내용',
  version: '1.1.0',
  outputDirectory: '인스톨러를 저장할 디렉토리',
  ui : {
    chooseDirectory : true
  },
  shortcutName : '바로가기이름'
});

//생성 및 컴파일
msiCreator.create().then(function(){
    msiCreator.compile();
})</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">일렉트론 파일을 msi 인스톨러로 만들어줄 빌더 파일입니다.</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">scripts에 인스톨러 하나를 만들어줍니다. <span style="color: #c41a16;">babel-node builder.js <span style="color: #000000;">방금 만든 buillder.js파일이며 babel-node는 아까 세팅한 babel 적용하겠다는 의미입니다.</span></span></p>
<pre id="code_1627888581449" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code> "scripts": {
    "build_installer": "babel-node builder.js"
 }</code></pre>
<p data-ke-size="size16">npm run build_installer&nbsp;</p>
<p data-ke-size="size16">msi 파일이 만들어집니다. 외부 가서 설치해야 하실 때 사용하시면 됩니다.&nbsp;</p>
<p data-ke-size="size16">env를 사용하시는 분은 빌드 후에 디렉터리에 env파일을 넣고 installer로 만드시면 됩니다.</p>
<p data-ke-size="size16">참고한 블로그 입니다. <a href="https://lts0606.tistory.com/475">https://lts0606.tistory.com/475</a></p>
<p data-ke-size="size16"><span style="background-color: #fffcf6; color: #000000;">성실한 코딩 하세요.</span></p>
                        </div>
                        <br/>
                        <div class="tags">
                            #Installer #build #builder #Electron 
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
