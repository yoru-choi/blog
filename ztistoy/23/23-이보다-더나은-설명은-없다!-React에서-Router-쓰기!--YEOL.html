
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>이보다 더나은 설명은 없다! React에서 Router 쓰기! -YEOL</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">이보다 더나은 설명은 없다! React에서 Router 쓰기! -YEOL</h2>
                                <div class="box-info">
                                    <p class="category">TS, JS/react</p>
                                    <p class="date">2020-06-12 16:14:00</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <p>&nbsp;</p>
<p><figure class="imageblock alignCenter" data-filename="react.png" data-origin-width="632" data-origin-height="602" width="407" height="NaN" data-ke-mobilestyle="widthContent">
    <span data-lightbox="lightbox">
        <img src="./img/img.png" data-filename="react.png" data-origin-width="632" data-origin-height="602" width="407" height="NaN" data-ke-mobilestyle="widthContent" />
    </span>
    <figcaption></figcaption>
</figure></p>
<h2 data-ke-size="size26">&nbsp;</h2>
<h2 data-ke-size="size26"><b>-React에서 Router란</b><b></b><b></b></h2>
<p>&nbsp;</p>
<p><b><span style="color: #006dd7;">SPA(싱글 페이지 어플리케이션)에서 경로 설정만으로 다른 화면을 보여주는 기술입니다.&nbsp;</span></b></p>
<p>html 파일로 예를 들어보겠습니다. html에선 보여줄 화면이 3개라면 html 파일 3개가 각각 경로가 되어&nbsp;</p>
<p>화면에 보여줍니다. 하지만 SPA는 싱글 페이지 이기 때문에 화면이 하나입니다. 그러니까 router 같은</p>
<p>경로 설정을 이용하여 보여주는 화면을 다르게 설정하는것입니다.</p>
<p>&nbsp;</p>
<p>[</p>
<p><u>router기본 기능 및 qs, params, history 설명입니다. 자주 쓰는 기능을 다뤘습니다.</u></p>
<p>]</p>
<h2 data-ke-size="size26"><b>-React에서 바로 실천해보기</b></h2>
<p>&nbsp;</p>
<p><b><span style="color: #333333;">npm install create react-app [원하는 프로젝트 명]</span></b></p>
<p><b><span style="color: #333333;"><b><span style="color: #333333;">yarn add create react-app [원하는 프로젝트 명]</span></b></span></b></p>
<p>명령 프롬프트에서 원하는 위치에 해당 명령을 실행해줍니다.</p>
<p>cra [<b><span style="color: #333333;"><b><span style="color: #333333;">create react-app</span></b></span></b>]를 통해 프로젝트 설치가 완료되었다면</p>
<p>라우터 기능을 사용하기 위한 패키지 모듈을 install 해줍시다 -&gt;&nbsp; <b>npm installl react-router-dom</b></p>
<p><b>그리고 npm start로 실행해줍니다!! </b></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>실행이 완료되셨다면 아래와 같은 목록이 생길텐데요.</p>
<p>index를 실행해줍니다. 처음엔 <b><span style="color: #006dd7;">&lt;React.StrictMode&gt;</span></b>라고 써있는 컴포넌트가 App을 감싸고있을것입니다.</p>
<p>이 컴포넌트는 잠제적인 문제를 알려주기위한 리액트 자체적인 기능이므로 삭제하셔도 괜찮습니다.</p>
<p>과감히 삭제합니다. 그리고 아래와같이 <span style="color: #006dd7;"><b>&lt;BrowserRouter&gt;</b> <span style="color: #333333;">를 입력해줍니다.&nbsp;</span></span></p>
<p><figure class="imageblock floatLeft" data-origin-width="0" data-origin-height="0" data-ke-mobilestyle="widthContent">
    <span data-lightbox="lightbox">
        <img src="./img/img_1.png" data-origin-width="0" data-origin-height="0" data-ke-mobilestyle="widthContent" />
    </span>
    <figcaption></figcaption>
</figure></p>
<pre id="code_1591940666212" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';
import App from './App';
import * as serviceWorker from './serviceWorker';

import {BrowserRouter}  from 'react-router-dom';      //요거

ReactDOM.render(
&lt;BrowserRouter&gt;  &lt;App /&gt;
&lt;/BrowserRouter&gt;
 ,
  document.getElementById('root')
);
</code></pre>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>위와같이 감싸준 이유는 App 컴포넌트 이후로 사용하는 곳에는 router기능을 사용하겠다는 의미입니다.</p>
<p>App.js 에서 본인이 원하는 컴포넌트 아무거나 2개 만드시면 됩니다. 저는 간단하게 AppA와 AppB를 만들었습니다.</p>
<p>아래와 같이 route를 해주려면 다른 js파일이 있어야 하기 때문에 만들어주는 것입니다.&nbsp;</p>
<p>보여주는 것을 달리하기 위해서입니다.&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>아래와 같이 코드를 작성해주세요.&nbsp;</p>
<pre id="code_1591940971073" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>import React from 'react';
import {Route , Link} from 'react-router-dom';
import AppA from './AppA';
import AppB from './AppB';

const App =()=&gt;{

  return (
    &lt;div&gt;
		&lt;ul&gt;
			&lt;li&gt;
				&lt;Link to="/"&gt;아니&lt;/Link&gt;
			&lt;/li&gt;
			&lt;li&gt;
				&lt;Link to="/AppB"&gt;안녕&lt;/Link&gt;
			&lt;/li&gt;
		&lt;/ul&gt;

			&lt;Route path="/" component={AppA} exact={true} /&gt;
			&lt;Route path="/AppB" component={AppB} /&gt;
		&lt;/div&gt;
  );
}
export default App;
</code></pre>
<p>install 했던 react-router-dom 을 통해 Link와 Route 기능을 불러옵니다.</p>
<p>경로와 컴포넌트를 기입하면 경로가 맞을 때 그 컴포넌트를 호출합니다.</p>
<p>exact는 정확하게 맞을 때만 구분하겠냐는 질문입니다. true로 설정했습니다.</p>
<p>3000 포트로 실행하시면 주소창에 경로 설정 변경만으로 컴포넌트를 다르게 띄우는 것이 보일 겁니다.</p>
<p>하지만 직접 주소창을 변경하는 게 불편하기 때문에 router에는 Link기능이 있습니다.&nbsp;</p>
<p>위에 코드를 따라가시면 링크는 경로를 변경해주는 기능이란 것을 알 수 있습니다.&nbsp;</p>
<p>&nbsp;</p>
<p><figure class="imageblock alignCenter" data-origin-width="0" data-origin-height="0" data-ke-mobilestyle="widthContent">
    <span data-lightbox="lightbox">
        <img src="./img/img_2.png" data-origin-width="0" data-origin-height="0" data-ke-mobilestyle="widthContent" />
    </span>
    <figcaption></figcaption>
</figure></p>
<p>&nbsp;</p>
<p>App A 와 App B 는 App 컴포넌트와 같은 디렉토리에 만들어주세요.&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><figure class="imageblock alignCenter" data-origin-width="0" data-origin-height="0" data-ke-mobilestyle="widthContent">
    <span data-lightbox="lightbox">
        <img src="./img/img_3.png" data-origin-width="0" data-origin-height="0" data-ke-mobilestyle="widthContent" />
    </span>
    <figcaption>캡쳐1</figcaption>
</figure></p>
<p>이렇게 나오시면 성공입니다. 하단부의 문자열은 제가 표시용으로 적었습니다.</p>
<p>&lt;Route path={['/AbbA', '/AbbB']} component={AppB} /&gt; 이 코드를 사용하면 2가지 경로로 하나의 컴포넌트를</p>
<p>불러줍니다. 저는 쓸 일이 단 한 번도 없었습니다.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><b>자 이제 파라미터 값을 사용해봅시다. 주소창의 경로를 값으로서 활용하는 방법입니다.</b></p>
<pre id="code_1591943297515" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>import React from 'react';
import {Route , Link} from 'react-router-dom';
import AppA from './AppA';
import AppB from './AppB';
import Profile from  './Profile';

const App =()=&gt;{

  return (
    &lt;div&gt;
					&lt;ul&gt;
					&lt;li&gt;
						&lt;Link to="/AppA"&gt;A &lt;/Link&gt;
					&lt;/li&gt;
					&lt;li&gt;
						&lt;Link to="/AppB"&gt;B &lt;/Link&gt;
					&lt;/li&gt;
						&lt;li&gt;
							&lt;Link to="/profile/itzy"&gt;있지 &lt;/Link&gt;
						&lt;/li&gt;
						&lt;li&gt;
						&lt;Link to="/profile/me"&gt;나&lt;/Link&gt;
						&lt;/li&gt;
					&lt;/ul&gt;

				&lt;Route path="/AppA" component={AppA} exact={true} /&gt;
				&lt;Route path={['/BBB', '/AppB']} component={AppB} /&gt;
				&lt;Route path="/profile/:username" component={Profile} /&gt;

		&lt;/div&gt;
  );
}
export default App;
</code></pre>
<p>&nbsp;</p>
<p>여기서 집중하 실부분은 Profile 이란&nbsp; 밑에 있는 코드가 들어간 js파일이 생성된 것과 3번째 라우터입니다.</p>
<p>:username라고 적었다는 것은 profile/어쩌고&nbsp; &nbsp;의 경로를 가지고 있다면&nbsp;</p>
<p>해당 경로로 이동하는 동시에 어쩌고를 파라미터 값으로 넘겨주는 것을 의미합니다. 하단의 match를 보시면 됩니다.</p>
<pre id="code_1591943216571" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>import React from 'react'

const data={
  itzy:{
    name:'류진',
    description:'미녀'
  },
  me:{
    name:'yeol',
    description:'coding slave'
  }
};

const Profile =({match}) =&gt;{

  const {username} = match.params;
  const profile = data[username];
  if(!profile){
    return &lt;div&gt;존재하지않는 사용자입니다.&lt;/div&gt;
  }

    return(
          &lt;div&gt;
            &lt;h3&gt;
              이름 {username} description ({profile.description})
            &lt;/h3&gt;
          &lt;/div&gt;
    )
}

export default Profile;
</code></pre>
<p>match라는 객체는 라우트 컴포넌트를 사용할 때 params 값을 참조합니다. 제가 만든 객체 아니고 match&nbsp;<br />라는 객체가 내부에 선언되어있습니다.</p>
<p>코드를 실행해보시면서 이해해보시는 걸 추천합니다. 간단한 예제일수록 실행해보는 것이 중요합니다.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><b>자 이제 쿼리 스트링을 사용해봅시다. 주소창의 경로를 값으로서 활용하는 두 번째 방법입니다.</b></p>
<p><b>이것까지만 해도 주소창 이용하는 기초는 끝난다고 봅니다. </b></p>
<p>아주 쉽게 하나만 남겨놨습니다. AppA 만들어놨던 거 쓸 겁니다.</p>
<p>&nbsp;</p>
<pre id="code_1591944521265" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>import React from 'react';
import {Route , Link} from 'react-router-dom';
import AppA from './AppA';
import AppB from './AppB';
import Profile from  './Profile';

const App =()=&gt;{

  return (
    &lt;div&gt;
					&lt;ul&gt;
						&lt;li&gt;
						&lt;Link to="/AppA?itzy=류진"&gt;나&lt;/Link&gt;
						&lt;/li&gt;
					&lt;/ul&gt;

				&lt;Route path="/AppA" component={AppA}  /&gt;


		&lt;/div&gt;
  );
}
export default App;
</code></pre>
<p>&nbsp;웹을 해보셨던 분이라면 쉽게 이해하실 겁니다.? 다음에 변수와 값을 설정해서 넘겨주는 방식입니다.</p>
<p>&nbsp;</p>
<pre id="code_1591944584962" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>import React from 'react';
import qs from 'qs'

const AppA =({location})=&gt;{

  const query = qs.parse(location.search,{
    ignoreQueryPrefix:true   //물음표 표시 생략위한 설정
  });
  const showQs =query.itzy;
  return (
    &lt;div&gt;
        &lt;h1&gt;Itzy
        {showQs }은 미녀입니다. &lt;/h1&gt;
    &lt;/div&gt;
  );
}
export default AppA;
</code></pre>
<p>&nbsp;qa를 npm에서 인스톨합니다. match와 마찬가지로 location은 qs를 가져오기 위한 객체입니다.&nbsp;</p>
<p>qs.parse를 쓴 이유는 파싱 안 해주면 location.search를 받아와도 값이 변질됩니다.&nbsp;</p>
<p><a href="https://www.npmjs.com/package/qs">https://www.npmjs.com/package/qs</a> 자세히 보려면 qs npm 참조하세요!</p>
<p>값을 잘 넘겨받는다면 qs까지 완료가 됐습니다.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><b>마지막으로 history 하나만 보고 마치겠습니다. 쓸만한 기능이라 남깁니다.</b></p>
<p>&lt;Route path="/history" component={History}&nbsp;&nbsp;/&gt; 이 코드 하나를 기존 App에 추가합시다.</p>
<p>그리고 js파일 하나를 생성합니다.</p>
<pre id="code_1591945822495" class="html xml" data-ke-language="html" data-ke-type="codeblock"><code>import React , {Component} from 'react'

export default class History extends Component{

    handleGoBack=()=&gt;{
      this.props.history.goBack();
    }
    handleGoHome=()=&gt;{
      this.props.history.push('/');
    }

      componentDidMount(){
          this.unBlock = this.props.history.block('짜잔');
      }

      componentWillUnmount(){
        if(this.unblock){
          this.unblock();
        }
      }

    render(){
      return(
        &lt;div&gt;
            &lt;button onClick={this.handleGoBack}&gt;뒤로&lt;/button&gt;
            &lt;button onClick={this.handleGoHome}&gt;홈으로&lt;/button&gt;
        &lt;/div&gt;
      )
    }
}
</code></pre>
<p>뒤로 가기가 존재합니다. 사실 꽤 중요한 기능입니다. html은 페이지를 변경하지만 spa는 구조가 다르기 때문에</p>
<p>경로가 변경되었을 뿐 html처럼 페이지가 변경된 것이 아니기 때문에 존재함에 감사하며 써야 합니다.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>최대한 간결하게 코드 블록을 만들었기 때문에 이해를 위한 설명보단</p>
<p>이해를 위한 노력이 덜 들게 하는 코드이길 바랍니다.</p>
                        </div>
                        <br/>
                        <div class="tags">
                            #react router #react router qs #react router params 
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
