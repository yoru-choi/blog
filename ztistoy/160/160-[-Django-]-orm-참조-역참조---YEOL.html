
<meta charset="utf-8">
<html lang="ko">
<head>
    <link rel="stylesheet" type="text/css" href="./../style.css" />
    <title>[ Django ] orm 참조 역참조 - YEOL</title>
</head>
<body id="tt-body-page" class="">
<div id="wrap" class="wrap-right">
    <div id="container">
        <main class="main ">
            <div class="area-main">
                <div class="area-view">
                    <div class="article-header">
                        <div class="inner-article-header">
                            <div class="box-meta">
                                <h2 class="title-article">[ Django ] orm 참조 역참조 - YEOL</h2>
                                <div class="box-info">
                                    <p class="category">Python/django</p>
                                    <p class="date">2023-03-13 17:57:11</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <div class="article-view">
                        <div class="contents_style">
                            <h4 data-ke-size="size20">?<span>&nbsp;</span><b>환경&nbsp;</b></h4>
<p data-ke-size="size16">Python 3.8<br />VsCode</p>
<h4 data-ke-size="size20">? <b>개요</b></h4>
<p data-ke-size="size16">&nbsp;</p>
<h4 data-ke-size="size20">?<span>&nbsp;</span><b>목차</b></h4>
<p data-ke-size="size16">&nbsp;</p>
<h2 data-ke-size="size26"><b>- Django orm 참조</b></h2>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">정참조</p>
<p data-ke-size="size16">1.&nbsp;</p>
<pre id="code_1678162728569" class="python" data-ke-language="python" data-ke-type="codeblock"><code>db.SomeModel.objects.select_related('SomeModel에서 참조하고있는 fk 컬럼').get(조건문)

e.g)
db.Account.objects.select_related('fk_id')filter(user_account='abc')</code></pre>
<p data-ke-size="size16">2.&nbsp;</p>
<pre id="code_1678339648222" class="python" data-ke-language="python" data-ke-type="codeblock"><code>db.SomeModel.objects.filter(
fk_some_column_id__index = "1"
)</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">역참조</p>
<pre id="code_1678697361910" class="python" data-ke-language="python" data-ke-type="codeblock"><code>instance = (
    db.Acount.objects.filter(
        index=params["fk_id"]
    )
)
card_info = db.Card.objects.filter(
    index=Subquery(
        instance.values("fk_card__id")[:1]
    )
)</code></pre>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16">역참조를 subquery를 통해서 하고 save로 저장 할경우 외래키 에러가 나옵니다</p>
<p data-ke-size="size16">그래서 update구문으로 진행해줘야합니다</p>
<p data-ke-size="size16">추가적으로 작성 필요한경우 수정및 작성 예정</p>
<p data-ke-size="size16">&nbsp;</p>
<p data-ke-size="size16"><b><span style="background-color: #ffffff; color: #555555;">? 근거 있는 조언은 언제나 환영합니다</span><span style="background-color: #ffffff; color: #555555;">. 성실한 코딩</span><span style="background-color: #ffffff; color: #555555;"><span>&nbsp;</span>하세요.</span></b></p>
                        </div>
                        <br/>
                        <div class="tags">
                            
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>
</body>
</html>
